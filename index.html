<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First$1online ‚Äì Make Your First $1 Online</title>
    <meta name="description"
        content="One practical Notion guide + builder community to help you earn your first real dollar online. No hype. Just steps.">
    <meta name="keywords" content="first dollar online, make money online beginner, indie builder, side hustle">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #f8fafc;
            --white: #ffffff;
            --accent: #10b981;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        nav {
            background: var(--white);
            box-shadow: var(--shadow);
            padding: 1rem 5%;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-weight: 900;
            font-size: 1.6rem;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links a {
            margin-left: 2rem;
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .cta-button-nav {
            background: #000;
            color: #fff !important;
            padding: 0.5rem 1.2rem;
            border-radius: 999px;
            font-size: 0.95rem;
        }

        /* Mobile menu */
        .menu-toggle {
            display: none;
            font-size: 1.6rem;
            cursor: pointer;
        }

        @media (max-width:768px) {
            .menu-toggle {
                display: block;
            }

            .nav-links {
                display: none;
                position: absolute;
                top: 60px;
                right: 5%;
                background: var(--white);
                padding: 1.5rem;
                border-radius: 12px;
                box-shadow: var(--shadow);
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links.active {
                display: flex;
            }
        }

        .hero {
            text-align: center;
            padding: 5rem 1.5rem 4rem;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
        }

        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            line-height: 1.15;
        }

        .hero h1 span {
            color: var(--accent);
        }

        .hero p {
            font-size: 1.25rem;
            max-width: 600px;
            margin: 0 auto 2rem;
            color: var(--text-light);
        }

        .cta-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }

        .main-cta,
        .secondary-cta {
            display: inline-block;
            padding: 1rem 2.2rem;
            border-radius: 999px;
            font-weight: 700;
            text-decoration: none;
            font-size: 1.1rem;
        }

        .main-cta {
            background: var(--primary);
            color: white;
            box-shadow: 0 8px 16px rgba(37, 99, 235, 0.25);
        }

        .main-cta:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .secondary-cta {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .secondary-cta:hover {
            background: var(--primary);
            color: white;
        }

        .section {
            padding: 4rem 5%;
        }

        .section-title {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .section-title h2 {
            font-size: 2.2rem;
            color: var(--primary);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.8rem;
            max-width: 1100px;
            margin: 0 auto;
        }

        .feature {
            background: white;
            padding: 1.8rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .feature h3 {
            margin: 1rem 0 0.8rem;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .preview-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 1.5rem;
            margin: 2rem auto;
            max-width: 1100px;
        }

        .preview-gallery img {
            width: 100%;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid #e2e8f0;
        }

        .community {
            background: #0f172a;
            color: white;
            text-align: center;
            padding: 4rem 5%;
        }

        .community h2 {
            margin-bottom: 1.5rem;
        }

        .community a {
            color: var(--accent);
            font-weight: 700;
            margin: 0 1rem;
        }

        .newsletter {
            background: #f1f5f9;
            padding: 4rem 5%;
            text-align: center;
        }

        .newsletter form {
            max-width: 500px;
            margin: 2rem auto;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }

        .newsletter input {
            flex: 1;
            min-width: 220px;
            padding: 0.9rem;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
        }

        .newsletter button {
            padding: 0.9rem 1.8rem;
            background: #000;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
        }

        footer {
            background: white;
            padding: 2.5rem;
            text-align: center;
            color: var(--text-light);
            border-top: 1px solid #e2e8f0;
        }

        footer a {
            color: var(--text);
            margin: 0 1rem;
            text-decoration: none;
        }

        @media (max-width:640px) {
            .hero h1 {
                font-size: 2.2rem;
            }

            .cta-group {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>

    <nav>
        <a href="#" class="logo">First$1online</a>
        <div class="nav-links">
            <a href="#what-you-get">What You Get</a>
            <a href="#preview">Preview</a>
            <a href="https://x.com/i/communities/2005700300741496877" target="_blank" class="cta-button-nav">
                <i class="fab fa-x-twitter"></i> Community
            </a>
        </div>
        <div class="menu-toggle"><i class="fas fa-bars"></i></div>
    </nav>

    <section class="hero">
        <h1>Make Your <span>First Real $1</span> Online</h1>
        <p>One straightforward Notion guide + access to a small builder community.<br>No courses, no upsells ‚Äî just
            practical first steps for $1.</p>

        <div class="cta-group">
            <a href="#preview" class="secondary-cta">See Preview First</a>
            <a href="https://buy.stripe.com/cNi00jcgkcLx4A092k8N201" class="main-cta">Pay $1 & Unlock Now</a>
        </div>

        <div style="margin-top:2rem; font-size:0.95rem; color:var(--text-light);">
            <i class="fas fa-shield-alt"></i> Instant Notion link after payment ‚Ä¢ <i class="fas fa-users"></i> Join real
            builders on X & Discord
        </div>
    </section>

    <section class="section" id="what-you-get">
        <div class="section-title">
            <h2>What You Actually Get for $1</h2>
        </div>
        <div class="features-grid">
            <div class="feature">
                <i class="fas fa-file-alt" style="font-size:2.8rem; color:var(--primary); margin-bottom:1rem;"></i>
                <h3>The First Dollar Blueprint (Notion)</h3>
                <p>Step-by-step Notion page with realistic ways beginners can earn their first dollar online ‚Äî no fluff,
                    no get-rich-quick promises.</p>
            </div>
            <div class="feature">
                <i class="fas fa-users" style="font-size:2.8rem; color:var(--primary); margin-bottom:1rem;"></i>
                <h3>Builder Community Access</h3>
                <p>Instant invite to our X community + Discord group where people share wins, ask questions and support
                    each other.</p>
            </div>
        </div>
    </section>

    <section class="section" id="preview" style="background:#ffffff;">
        <div class="section-title">
            <h2>Real Preview of the Blueprint</h2>
            <p>These are actual screenshots ‚Äî sensitive parts blurred. Full readable version unlocks after $1.</p>
        </div>
        <div class="preview-gallery">
            <!-- REPLACE THESE WITH YOUR REAL SCREENSHOTS -->
            <img src="./images/img1.png" alt="First One Dollar Blueprint">
            <img src="./images/img2.png" alt="Funnel-To-Flywheel">
            <img src="./images/img3.png" alt="Flywheel">
        </div>
        <div style="text-align:center; margin-top:2.5rem;">
            <a href="https://buy.stripe.com/cNi00jcgkcLx4A092k8N201" class="main-cta">Unlock Full Version for $1</a>
        </div>
    </section>

    <section class="newsletter">
        <h2>Not ready for $1 yet?</h2>
        <p>Get one free weekly tip on earning your first dollar online ‚Äî straight to your inbox.</p>
        <form action="https://formsubmit.co/swiftsellai@gmail.com" method="POST">
            <input type="hidden" name="_next" value="https://firstonedollaronline.com/">
            <input type="hidden" name="_subject" value="First$1online Newsletter Signup">
            <input type="email" name="email" placeholder="Your email" required>
            <button type="submit">Join Free</button>
        </form>
        <p style="margin-top:1rem; font-size:0.9rem; color:var(--text-light);">No spam. One-click unsubscribe.</p>
    </section>

    <section class="community">
        <h2><i class="fab fa-x-twitter"></i> Join the Builders</h2>
        <p>Real conversations. Real first wins. No gatekeeping.</p>
        <div style="margin-top:1.5rem;">
            <a href="https://x.com/i/communities/2005700300741496877" target="_blank">X Community</a>
            <a href="https://discord.gg/9YREqmph" target="_blank">Discord Server</a>
        </div>
    </section>

    <footer>
        <p>¬© 2026 First$1online ‚Äì A #buildinpublic experiment by <a href="https://x.com/swiftsell_ai">@swiftsell_ai</a>
        </p>
        <div style="margin-top:1rem;">
            <a href="#">Terms</a> ‚Ä¢ <a href="#">Privacy</a>
        </div>
    </footer>

    <script>
        document.querySelector('.menu-toggle').addEventListener('click', () => {
            document.querySelector('.nav-links').classList.toggle('active');
        });
    </script>
    <!-- Floating dollars ‚Äì add this before </body> -->
    <div class="money-fly"
        style="position:fixed; font-size:4rem; left:10%; top:100vh; pointer-events:none; z-index:5; opacity:0.18; animation: rise 25s linear infinite, sway 18s ease-in-out infinite alternate;">
        üí∏</div>
    <div class="money-fly"
        style="position:fixed; font-size:3.2rem; left:45%; top:120vh; pointer-events:none; z-index:5; opacity:0.14; animation: rise 32s linear infinite 4s, sway 22s ease-in-out infinite alternate-reverse;">
        üí∏</div>
    <div class="money-fly"
        style="position:fixed; font-size:5rem; left:78%; top:90vh; pointer-events:none; z-index:5; opacity:0.16; animation: rise 28s linear infinite 8s, sway 20s ease-in-out infinite alternate;">
        üí∏</div>

    <style>
        @keyframes rise {
            to {
                transform: translateY(-150vh);
            }
        }

        @keyframes sway {
            from {
                transform: translateX(-30vw);
            }

            to {
                transform: translateX(30vw);
            }
        }

        /* Modal Overlay with Blur */
        #winModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(17, 24, 39, 0.85);
            /* Dark overlay */
            backdrop-filter: blur(8px);
            /* The "Glass" effect */
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* The Card */
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 24px;
            width: 90%;
            max-width: 420px;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Visible State (Handled by JS) */
        #winModal.active {
            opacity: 1;
        }

        #winModal.active .modal-content {
            transform: scale(1);
        }

        /* Typography */
        h2.win-title {
            font-size: 2rem;
            margin: 0 0 0.5rem 0;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        p.win-subtitle {
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        /* The "SwiftSell" Hook Box */
        .cta-box {
            background: #f0fdf4;
            /* Light Green bg */
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .cta-text {
            font-size: 0.9rem;
            color: #166534;
            font-weight: 500;
            margin-bottom: 0.75rem;
        }

        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            margin-bottom: 0.75rem;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: #111827;
            /* Dark almost black */
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: white;
            border: 2px solid #e5e7eb;
            color: #374151;
        }

        .btn-twitter {
            background: #0ea5e9;
            /* Sky blue */
            color: white;
        }
    </style>
    <!-- Scroll-triggered flying dollar -->
    <div id="big-dollar"
        style="position:fixed; font-size:7rem; left:50%; top:80%; transform:translate(-50%,50%); opacity:0; pointer-events:none; z-index:6; transition:opacity 0.8s, transform 1.2s;">
        üí∏</div>

    <script>
        window.addEventListener('scroll', () => {
            const dollar = document.getElementById('big-dollar');
            if (window.scrollY > 300) {  // show after scrolling ~300px
                dollar.style.opacity = '0.35';
                dollar.style.transform = 'translate(-50%, -120vh) rotate(15deg)';
            } else {
                dollar.style.opacity = '0';
                dollar.style.transform = 'translate(-50%,50%) rotate(0deg)';
            }
        });
    </script>
<!-- Dollar Collector Game - UPGRADED w/ MORE UPGRADES, PRESTIGE, LEADERBOARD TEASE -->
<!-- Drop this entire block before </body> on your landing page -->
<div id="collector-game" style="
  position: fixed; bottom:20px; right:20px; width:280px; height:460px;
  background: rgba(255,255,255,0.04);
  backdrop-filter: blur(20px);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:24px;
  box-shadow:0 12px 40px rgba(0,0,0,0.18);
  overflow:hidden; z-index:9999;
  font-family:system-ui,sans-serif; color:white; display:flex; flex-direction:column;
  transition: opacity 0.3s ease;
">
  <!-- Header with Close -->
  <div style="position:relative; padding:14px 18px; background:rgba(0,0,0,0.45); text-align:center; font-size:1rem; font-weight:700;">
    Collect Your First $1! üí∞ <span id="multiplier" style="color:#10b981;">x1</span> <span id="prestige" style="font-size:0.85rem; color:#fbbf24; opacity:0.8;">P0</span>
    <button id="closeBtn" style="position:absolute; top:8px; right:12px; background:none; border:none; color:#aaa; font-size:1.4em; cursor:pointer; width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:color 0.2s;"
      title="Close">√ó</button>
  </div>

  <!-- Canvas -->
  <canvas id="gameCanvas" width="280" height="300" style="display:block; background: radial-gradient(circle at center, #001122 0%, #000 100%);"></canvas>

  <!-- Score & PB -->
  <div style="padding:12px 12px 4px; text-align:center; font-size:0.95rem; background:rgba(0,0,0,0.35);">
    $<span id="score">0.00</span> | PB: $<span id="bestScore">0.00</span>
  </div>

  <!-- Upgrades -->
  <div id="upgrades" style="padding:0 12px 8px; max-height:90px; overflow-y:auto; background:rgba(0,0,0,0.25); display:none; gap:6px;">
    <!-- Upgrades populated by JS -->
  </div>

  <!-- Leaderboard Tease -->
  <div id="leaderboardTease" style="padding:0 12px 12px; background:rgba(0,0,0,0.3); text-align:center; font-size:0.8rem; display:none; opacity:0.9;">
    <div style="margin-bottom:4px;">üèÜ Top Hustlers</div>
    <div id="topScores" style="font-size:0.75rem; line-height:1.2;">1. You: $<span id="pbInLb">0.00</span><br>Share PB for Global!</div>
    <button id="sharePB" style="margin-top:6px; padding:4px 12px; background:#1d9bf0; color:white; border:none; border-radius:6px; font-size:0.75rem; cursor:pointer;">Post PB to X</button>
  </div>
</div>

<!-- Win Modal -->
<div id="winModal" style="position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.9); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:10000; font-family:system-ui; color:white; text-align:center; padding:20px;">
  <div style="font-size:3rem; margin-bottom:20px;">üéâ $1 Collected!</div>
  <div style="font-size:1.3rem; margin-bottom:30px; max-width:400px;">You've hustled your first virtual $1! Unlock the <strong>REAL blueprint</strong> for just $1 (instant access + Discord/X community).</div>
  <div style="display:flex; gap:15px; flex-wrap:wrap; justify-content:center; margin-bottom:20px;">
    <a id="buyBtn" href="https://firstonedollaronline.com/buy" target="_blank" style="padding:12px 24px; background:#10b981; color:white; text-decoration:none; border-radius:12px; font-weight:600;">Buy Now - $1</a>
    <button id="shareBtn" style="padding:12px 24px; background:#1d9bf0; color:white; border:none; border-radius:12px; font-weight:600; cursor:pointer;">Share on X</button>
    <button id="continueBtn" style="padding:12px 24px; background:#666; color:white; border:none; border-radius:12px; font-weight:600; cursor:pointer;">Continue Playing</button>
  </div>
  <button id="modalClose" style="padding:8px 16px; background:transparent; color:#ccc; border:1px solid #ccc; border-radius:8px; cursor:pointer;">Close</button>
</div>

<!-- Prestige Modal -->
<div id="prestigeModal" style="position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.9); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:10000; font-family:system-ui; color:white; text-align:center; padding:20px;">
  <div style="font-size:2.5rem; margin-bottom:20px;">‚ö° Prestige Reset?</div>
  <div style="font-size:1.2rem; margin-bottom:30px; max-width:350px;">Sacrifice your $50 for permanent x1.2 multiplier! Stackable for endless scaling üíé</div>
  <div style="display:flex; gap:15px; margin-bottom:20px;">
    <button id="confirmPrestige" style="padding:12px 24px; background:#fbbf24; color:black; border:none; border-radius:12px; font-weight:600; cursor:pointer;">Prestige & Reset</button>
    <button id="cancelPrestige" style="padding:12px 24px; background:#666; color:white; border:none; border-radius:12px; font-weight:600; cursor:pointer;">Keep Grinding</button>
  </div>
</div>

<script>
  // Game State
  const gameEl = document.getElementById('collector-game');
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const scoreEl = document.getElementById('score');
  const bestScoreEl = document.getElementById('bestScore');
  const multiplierEl = document.getElementById('multiplier');
  const prestigeEl = document.getElementById('prestige');
  const upgradesEl = document.getElementById('upgrades');
  const leaderboardEl = document.getElementById('leaderboardTease');
  const pbInLbEl = document.getElementById('pbInLb');

  let score = 0; // cents
  let bestScore = 0;
  let multiplier = 1;
  let baseMult = 1;
  let prestigeLevel = 0;
  let playerX = canvas.width / 2 - 25;
  let playerWidth = 50;
  let dollars = [];
  let powerups = [];
  let particles = [];
  let idleRate = 0;
  let spawnMult = 1;
  let goldenChance = 0.15;
  let powerupMult = 1;
  let multiLock = false;
  let baseSpeed = 0.8;
  let gameSpeed = baseSpeed;
  let powerupTimer = 0;
  let missStreak = 0;
  let magnet = 0;
  let autoCatchChance = 0;
  let shownWin = false;
  let currentMotivation = '';
  let motivations = [
    "First $1 incoming! üöÄ", "You're unstoppable üí™", "Momentum building...",
    "Ship that idea now!", "One more dollar! üî•", "Edinburgh hustle! üè¥",
    "Keep collecting wins üèÜ", "Power-up activated! ‚ú®", "x2 multiplier! üéâ",
    "Upgrade unlocked! ‚ö°", "Daily boost claimed! üí•", "Prestige ready! ‚ö°",
    "PB smashed! üèÜ", "Passive income flowing üí∞"
  ];

  // MORE Upgrades (7 total)
  const upgrades = [
    { id: 'wider', name: 'Wider Wallet', cost: 25, owned: false, desc: '+ Wider Catch' },
    { id: 'magnet', name: 'Dollar Magnet', cost: 50, owned: false, desc: 'Dollars Curve In' },
    { id: 'auto', name: 'Auto-Catch', cost: 75, owned: false, desc: '20% Auto Grab' },
    { id: 'spawn', name: 'Faster Drops', cost: 100, owned: false, desc: 'x1.5 Dollars/sec' },
    { id: 'golden', name: 'Golden Rain', cost: 150, owned: false, desc: '40% Rares' },
    { id: 'idle', name: 'Passive Income', cost: 200, owned: false, desc: '+1¬¢/sec' },
    { id: 'multilock', name: 'Multi Lock', cost: 300, owned: false, desc: 'No Miss Reset' },
    { id: 'prestige', name: 'Prestige Reset', cost: 5000, owned: false, desc: 'x1.2 Base Mult (RESET)' }
  ];

  // LocalStorage
  function loadGame() {
    const saved = localStorage.getItem('dollarGame');
    if (saved) {
      const data = JSON.parse(saved);
      score = data.score || 0;
      bestScore = data.bestScore || 0;
      multiplier = data.multiplier || 1;
      baseMult = data.baseMult || 1;
      prestigeLevel = data.prestigeLevel || 0;
      gameSpeed = data.gameSpeed || baseSpeed;
      idleRate = data.idleRate || 0;
      spawnMult = data.spawnMult || 1;
      goldenChance = data.goldenChance || 0.15;
      powerupMult = data.powerupMult || 1;
      multiLock = data.multiLock || false;
      upgrades.forEach((u, i) => { u.owned = data.upgrades[i] || false; });
      applyUpgradeEffects();
    }
    // Daily bonus
    const lastPlay = localStorage.getItem('lastPlay') || 0;
    if (Date.now() - parseInt(lastPlay) > 86400000) {
      score += 500;
      showMotivation("Daily Hustle Boost! üí•");
      localStorage.setItem('lastPlay', Date.now());
    }
    updateDisplay();
  }

  function applyUpgradeEffects() {
    playerWidth = 50 + (upgrades[0].owned ? 30 : 0);
    magnet = upgrades[1].owned ? 0.015 : 0;
    autoCatchChance = upgrades[2].owned ? 0.2 : 0;
    spawnMult = upgrades[3].owned ? 1.5 : (upgrades[3].owned ? 1.5 : 1);
    goldenChance = upgrades[4].owned ? 0.4 : 0.15;
    if (upgrades[5].owned) idleRate += 1;
    multiLock = upgrades[6].owned;
    powerupMult = upgrades[3].owned ? 1.3 : 1; // Bonus from spawn
  }

  function saveGame() {
    localStorage.setItem('dollarGame', JSON.stringify({
      score, bestScore, multiplier, baseMult, prestigeLevel, gameSpeed, idleRate,
      spawnMult, goldenChance, powerupMult, multiLock,
      upgrades: upgrades.map(u => u.owned)
    }));
    localStorage.setItem('lastPlay', Date.now());
  }

  // Events
  canvas.addEventListener('touchmove', handleMove, { passive: false });
  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('touchstart', handleMove, { passive: false });
  canvas.addEventListener('click', handleMove);

  document.getElementById('closeBtn').onclick = () => {
    gameEl.style.display = 'none';
    localStorage.setItem('gameClosed', 'true');
  };

  if (localStorage.getItem('gameClosed') === 'true') {
    gameEl.style.display = 'none';
  }

  document.getElementById('sharePB').onclick = sharePB;

  function handleMove(e) {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    playerX = Math.max(0, Math.min(canvas.width - playerWidth, x - playerWidth / 2));
  }

  function sharePB() {
    const pb = (bestScore / 100).toFixed(2);
    const tweet = `My PB in First$1 Collector: $${pb}! Beat me? firstonedollaronline.com #FirstDollarPB #SideHustle`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(tweet)}&url=https://firstonedollaronline.com`, '_blank');
    showMotivation("PB Shared! üöÄ");
  }

  // Create Dollar
  function createDollar() {
    dollars.push({
      x: Math.random() * (canvas.width - 30),
      y: -40,
      size: 25 + Math.random() * 15,
      speed: baseSpeed + Math.random() * 0.6,
      type: Math.random() < goldenChance ? 'golden' : 'normal',
      value: Math.random() < goldenChance ? 5 : 1
    });
  }

  // Create Powerup
  function createPowerup() {
    powerups.push({
      x: Math.random() * (canvas.width - 35),
      y: -50,
      size: 32,
      speed: 1.0,
      type: Math.random() < 0.5 ? 'multi2' : 'speed'
    });
  }

  // Particles
  function createParticles(x, y) {
    for (let i = 0; i < 12; i++) {
      particles.push({
        x, y,
        vx: (Math.random() - 0.5) * 5,
        vy: (Math.random() - 0.5) * 5 - 2,
        life: 45,
        size: 8 + Math.random() * 8
      });
    }
  }

  // Update Loop
  function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Idle Income (per frame ~1/60 sec)
    score += (idleRate / 60) * baseMult * multiplier;

    // Particles
    for (let i = particles.length - 1; i >= 0; i--) {
      const p = particles[i];
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.12;
      p.life--;
      ctx.save();
      ctx.globalAlpha = p.life / 45;
      ctx.shadowColor = '#10b981';
      ctx.shadowBlur = 12;
      ctx.font = `${p.size}px system-ui`;
      ctx.fillText('üí∞', p.x, p.y);
      ctx.restore();
      if (p.life <= 0) particles.splice(i, 1);
    }

    // Player
    ctx.save();
    if (multiplier > 1 || magnet > 0 || autoCatchChance > 0 || prestigeLevel > 0) {
      ctx.shadowColor = '#10b981';
      ctx.shadowBlur = 25;
    }
    ctx.fillStyle = '#10b981';
    ctx.fillRect(playerX, canvas.height - 50, playerWidth, 40);
    ctx.fillStyle = 'white';
    ctx.font = 'bold 16px system-ui';
    ctx.textAlign = 'center';
    ctx.fillText('üëõ', playerX + playerWidth / 2, canvas.height - 22);
    ctx.restore();

    // Dollars
    for (let i = dollars.length - 1; i >= 0; i--) {
      const d = dollars[i];
      if (magnet > 0) {
        const targetX = playerX + playerWidth / 2;
        d.x += (targetX - d.x) * magnet;
      }
      d.y += d.speed * gameSpeed;

      ctx.save();
      ctx.shadowColor = d.type === 'golden' ? '#fbbf24' : '#ffd700';
      ctx.shadowBlur = d.type === 'golden' ? 18 : 10;
      ctx.font = `${d.size}px system-ui`;
      ctx.fillText('üí∏', d.x, d.y + d.size * 0.7);
      ctx.restore();

      const hit = d.y > canvas.height - 90 && d.x > playerX - 10 && d.x < playerX + playerWidth + 10;
      if (hit || (Math.random() < autoCatchChance)) {
        score += d.value * multiplier * baseMult;
        createParticles(d.x, d.y);
        dollars.splice(i, 1);
        gameSpeed += 0.008;
        missStreak = 0;
        playCollectSound();
        updateDisplay();
        saveGame();
        checkWin();
        checkPB();
        continue;
      }

      if (d.y > canvas.height) {
        dollars.splice(i, 1);
        missStreak++;
        if (missStreak >= 3 && !multiLock) {
          multiplier = 1;
          missStreak = 0;
          showMotivation("Streak reset! Focus üòÖ");
          playMissSound();
        }
      }
    }

    // Powerups
    powerupTimer++;
    if (powerupTimer > (250 / powerupMult) + Math.random() * 120) {
      createPowerup();
      powerupTimer = 0;
    }
    for (let i = powerups.length - 1; i >= 0; i--) {
      const p = powerups[i];
      p.y += p.speed * gameSpeed;

      ctx.save();
      ctx.shadowColor = p.type === 'multi2' ? '#fbbf24' : '#3b82f6';
      ctx.shadowBlur = 25 + Math.sin(Date.now() * 0.01) * 5;
      ctx.fillStyle = p.type === 'multi2' ? '#fbbf24' : '#3b82f6';
      ctx.beginPath();
      ctx.arc(p.x + p.size / 2, p.y + p.size / 2, p.size / 2, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = 'white';
      ctx.font = 'bold 16px system-ui';
      ctx.textAlign = 'center';
      ctx.fillText(p.type === 'multi2' ? 'x2' : '‚ö°', p.x + p.size / 2, p.y + p.size / 2 + 5);
      ctx.restore();

      if (p.y > canvas.height - 90 && p.x > playerX - 15 && p.x < playerX + playerWidth + 15) {
        if (p.type === 'multi2') {
          multiplier = Math.min(multiplier * 2, 16);
          showMotivation("x2 MULTIPLIER! ‚ú®");
        } else {
          gameSpeed *= 0.7;
          showMotivation("SPEED BOOST! ‚ö°");
        }
        powerups.splice(i, 1);
        playPowerupSound();
        setTimeout(() => {
          if (p.type === 'multi2') multiplier = Math.max(1, multiplier / 2);
          else gameSpeed /= 0.7;
          saveGame();
        }, 12000);
        continue;
      }

      if (p.y > canvas.height) powerups.splice(i, 1);
    }

    // Spawn
    if (Math.random() < (0.035 + gameSpeed * 0.008) * spawnMult && dollars.length < 18) createDollar();

    // Motivation fade (bugfix: reset alpha after)
    ctx.globalAlpha = currentMotivation ? 0.98 ** 60 : 1; // fade over ~1s
    if (Math.random() < 0.01 && currentMotivation) {
      ctx.fillStyle = 'rgba(16,185,129,0.95)';
      ctx.fillRect(20, 100, 240, 45);
      ctx.fillStyle = 'white';
      ctx.font = 'bold 15px system-ui';
      ctx.textAlign = 'center';
      ctx.fillText(currentMotivation, canvas.width / 2, 128);
      ctx.textAlign = 'left';
    }
    ctx.globalAlpha = 1;

    requestAnimationFrame(update);
  }

  function updateDisplay() {
    scoreEl.textContent = (score / 100).toFixed(2);
    bestScoreEl.textContent = (bestScore / 100).toFixed(2);
    pbInLbEl.textContent = (bestScore / 100).toFixed(2);
    multiplierEl.textContent = `x${Math.round(multiplier * 10) / 10}`;
    prestigeEl.textContent = `P${prestigeLevel}`;
    prestigeEl.style.opacity = prestigeLevel > 0 ? 1 : 0.6;
    // Upgrades
    if (score >= 20 && upgradesEl.style.display !== 'block') {
      upgradesEl.style.display = 'flex';
      renderUpgrades();
    }
    // Leaderboard tease at $5 PB
    if (bestScore >= 500 && leaderboardEl.style.display !== 'block') {
      leaderboardEl.style.display = 'block';
    }
    // Prestige avail at $50
    if (score >= 5000) {
      renderUpgrades(); // refresh to show
    }
  }

  function checkPB() {
    if (score > bestScore) {
      bestScore = score;
      showMotivation("New PB! üèÜ");
      saveGame();
    }
  }

  function checkWin() {
    if (score >= 100 && !shownWin) {
      shownWin = true;
      document.getElementById('winModal').style.display = 'flex';
    }
  }

  function showMotivation(msg) {
    currentMotivation = msg;
  }

  // Render Upgrades
  function renderUpgrades() {
    upgradesEl.innerHTML = '';
    upgrades.forEach(u => {
      if (!u.owned || u.id === 'prestige') { // Prestige always available
        const canAfford = score >= u.cost;
        const btn = document.createElement('button');
        btn.style.cssText = `
          flex:1; padding:6px 8px; 
          background: ${canAfford ? 'rgba(16,185,129,0.4)' : 'rgba(75,85,99,0.4)'};
          border:1px solid ${canAfford ? '#10b981' : '#6b7280'};
          border-radius:8px; color:white; font-size:0.78rem; cursor:${canAfford ? 'pointer' : 'default'};
          transition: all 0.2s;
        `;
        const costStr = u.id === 'prestige' ? '$50 Reset' : `$${(u.cost/100).toFixed(2)}`;
        btn.innerHTML = `<div style="font-weight:600;">${u.name}</div><div style="font-size:0.7rem;opacity:0.85;">${u.desc} - ${costStr}</div>`;
        btn.onclick = canAfford ? () => buyUpgrade(u) : null;
        upgradesEl.appendChild(btn);
      }
    });
  }

  function buyUpgrade(u) {
    if (score >= u.cost) {
      if (u.id === 'prestige') {
        document.getElementById('prestigeModal').style.display = 'flex';
        return; // Confirm in modal
      }
      score -= u.cost;
      u.owned = true;
      switch (u.id) {
        case 'spawn': spawnMult *= 1.5; powerupMult *= 1.3; break;
        case 'golden': goldenChance = 0.4; break;
        case 'idle': idleRate += 1; break;
        case 'multilock': multiLock = true; break;
        default: applyUpgradeEffects();
      }
      createParticles(canvas.width / 2, 150);
      showMotivation(`${u.name} unlocked! ‚ö°`);
      updateDisplay();
      renderUpgrades();
      saveGame();
    }
  }

  // Modal Events
  document.getElementById('shareBtn').onclick = () => {
    const tweet = `Just collected my first $1 in the @first1dollar game! üöÄ Unlock the real blueprint: firstonedollaronline.com #FirstDollarOnline #SideHustle`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(tweet)}&url=https://firstonedollaronline.com`);
    document.getElementById('winModal').style.display = 'none';
  };
  document.getElementById('continueBtn').onclick = () => document.getElementById('winModal').style.display = 'none';
  document.getElementById('modalClose').onclick = () => document.getElementById('winModal').style.display = 'none';

  // Prestige Modal
  document.getElementById('confirmPrestige').onclick = () => {
    score = 0;
    gameSpeed = baseSpeed;
    multiplier = 1;
    missStreak = 0;
    prestigeLevel++;
    baseMult *= 1.2;
    upgrades[7].owned = false; // Reset prestige avail
    document.getElementById('prestigeModal').style.display = 'none';
    createParticles(canvas.width / 2, canvas.height / 2);
    showMotivation("Prestiged! Base x1.2 üíé");
    updateDisplay();
    renderUpgrades();
    saveGame();
  };
  document.getElementById('cancelPrestige').onclick = () => {
    document.getElementById('prestigeModal').style.display = 'none';
  };

  // Sounds
  function playCollectSound() { playSound(660, 0.15, 0.12); }
  function playPowerupSound() { playSound(880, 0.25, 0.18); }
  function playMissSound() { playSound(220, 0.12, 0.25); }
  function playSound(freq, volume, duration) {
    try {
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.frequency.value = freq;
      osc.type = 'sine';
      gain.gain.setValueAtTime(volume, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
      osc.start();
      osc.stop(audioCtx.currentTime + duration);
    } catch (e) {}
  }

  // Init
  loadGame();
  applyUpgradeEffects();
  update();
  createDollar();
</script>
</body>

</html>
